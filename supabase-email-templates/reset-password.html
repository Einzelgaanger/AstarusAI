<!DOCTYPE html>
<!-- PLING_QUERY fix: In Supabase (Auth → Email → Reset password), set Subject to e.g. "Reset your Astarus AI password" with NO exclamation mark or question mark. -->
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>
  <body style="margin:0; padding:0; background-color:#fafafa;
               font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;">
    
    <table width="100%" cellpadding="0" cellspacing="0" style="background-color:#fafafa;">
      <tr>
        <td style="padding:40px 20px;">

          <!-- Logo Section -->
          <table width="100%" cellpadding="0" cellspacing="0" style="margin-bottom:40px;">
            <tr>
              <td align="center">
                <!-- Logo: upload your logo to Supabase Storage → public bucket → logo.png (or adjust path below) -->
                <img src="https://cktqgcmcqikkgaazrhbs.supabase.co/storage/v1/object/public/public/logo.png"
                     alt="Astarus AI"
                     width="220"
                     style="display:block; margin:0 auto;">
              </td>
            </tr>
          </table>

          <!-- Main Card Container -->
          <table width="100%" cellpadding="0" cellspacing="0" align="center">
            <tr>
              <td align="center">
                
                <!-- Card -->
                <!-- IMPORTANT FIX: removed opacity:0 so Gmail won't render it invisible -->
                <table cellpadding="0" cellspacing="0"
                       style="max-width:600px; width:100%; background-color:#ffffff;
                              border:1px solid #e8e8e8;
                              border-radius:12px;
                              box-shadow: 0 4px 24px rgba(0,0,0,0.06);">
                  
                  <!-- Purple accent bar -->
                  <!-- IMPORTANT FIX: removed scaleX(0) so bar is visible even if CSS animations are stripped -->
                  <tr>
                    <td style="background-color:#5a2db8; height:4px; border-radius:12px 12px 0 0;"></td>
                  </tr>

                  <!-- Content -->
                  <tr>
                    <td style="padding:48px 48px 40px 48px;">
                      
                      <!-- Animated Icon - Lock with key rotation -->
                      <table width="100%" cellpadding="0" cellspacing="0" style="margin-bottom:32px;">
                        <tr>
                          <td>
                            <div style="position:relative; width:100px; height:100px; display:inline-block;">
                              <!-- Main lock container -->
                              <div style="position:relative; width:100px; height:100px; 
                                          animation: floatUpDown 3s ease-in-out infinite;">
                                
                                <!-- Lock and key SVG -->
                                <svg width="100" height="100" viewBox="0 0 100 100" style="filter: drop-shadow(0 4px 12px rgba(90, 45, 184, 0.2));">
                                  <!-- Lock body -->
                                  <rect x="30" y="45" width="40" height="35" rx="6" fill="#f8f7ff" stroke="#5a2db8" stroke-width="2.5"/>
                                  
                                  <!-- Lock shackle -->
                                  <path d="M 35 45 L 35 35 Q 35 25 50 25 Q 65 25 65 35 L 65 45" 
                                        fill="none" stroke="#5a2db8" stroke-width="2.5" stroke-linecap="round"/>
                                  
                                  <!-- Keyhole -->
                                  <circle cx="50" cy="60" r="4" fill="#5a2db8"/>
                                  <rect x="48" y="60" width="4" height="10" rx="2" fill="#5a2db8"/>
                                  
                                  <!-- Rotating key (animated) -->
                                  <g style="transform-origin: 75px 30px; animation: rotateKey 4s ease-in-out infinite;">
                                    <!-- Key shaft -->
                                    <rect x="62" y="28" width="20" height="4" rx="2" fill="#e8e0ff" stroke="#5a2db8" stroke-width="1.5"/>
                                    <!-- Key teeth -->
                                    <rect x="80" y="26" width="3" height="3" fill="#e8e0ff" stroke="#5a2db8" stroke-width="1"/>
                                    <rect x="80" y="31" width="3" height="3" fill="#e8e0ff" stroke="#5a2db8" stroke-width="1"/>
                                    <!-- Key head -->
                                    <circle cx="65" cy="30" r="5" fill="#5a2db8"/>
                                    <circle cx="65" cy="30" r="2" fill="white"/>
                                  </g>
                                  
                                  <!-- Shield outline -->
                                  <path d="M 50 15 L 58 18 L 58 28 Q 58 35 50 40 Q 42 35 42 28 L 42 18 Z" 
                                        fill="none" stroke="#5a2db8" stroke-width="1.5" opacity="0.4"
                                        style="animation: shieldPulse 3s ease-in-out infinite;"/>
                                </svg>
                                
                                <!-- Security particles -->
                                <div style="position:absolute; top:5px; left:-8px; width:5px; height:5px; 
                                            background-color:#5a2db8; border-radius:50%; opacity:0;
                                            animation: securityParticle1 4s ease-in-out infinite;"></div>
                                <div style="position:absolute; top:15px; right:-10px; width:4px; height:4px; 
                                            background-color:#8b6bd9; border-radius:50%; opacity:0;
                                            animation: securityParticle2 4s ease-in-out infinite;"></div>
                                <div style="position:absolute; bottom:20px; left:0px; width:6px; height:6px; 
                                            background-color:#5a2db8; border-radius:50%; opacity:0;
                                            animation: securityParticle3 4s ease-in-out infinite;"></div>
                                <div style="position:absolute; bottom:10px; right:5px; width:4px; height:4px; 
                                            background-color:#8b6bd9; border-radius:50%; opacity:0;
                                            animation: securityParticle4 4s ease-in-out infinite;"></div>
                              </div>
                            </div>
                          </td>
                        </tr>
                      </table>

                      <!-- Title Section -->
                      <table width="100%" cellpadding="0" cellspacing="0" style="margin-bottom:20px;">
                        <tr>
                          <td>
                            <h1 style="margin:0 0 8px 0; font-size:32px; font-weight:700; color:#0a0a0a;
                                       letter-spacing:-0.5px; line-height:1.2;">
                              Reset Your Password
                            </h1>
                            <p style="margin:0; font-size:16px; color:#666666; font-weight:500;">
                              Secure your Astaris AI account
                            </p>
                          </td>
                        </tr>
                      </table>

                      <!-- Divider -->
                      <!-- IMPORTANT FIX: removed scaleX(0) so it is visible even if CSS animations are stripped -->
                      <table width="100%" cellpadding="0" cellspacing="0" style="margin-bottom:28px;">
                        <tr>
                          <td>
                            <div style="width:60px; height:3px; background-color:#5a2db8; border-radius:2px;"></div>
                          </td>
                        </tr>
                      </table>

                      <!-- Message Section -->
                      <table width="100%" cellpadding="0" cellspacing="0" style="margin-bottom:32px;">
                        <tr>
                          <td style="font-size:16px; line-height:1.7; color:#333333;">
                            <p style="margin:0 0 16px 0;">
                              We received a request to reset the password for your Astaris AI account.
                            </p>
                            <p style="margin:0;">
                              Click the button below to create a new password. This link will expire in <strong>1 hour</strong> for security purposes.
                            </p>
                          </td>
                        </tr>
                      </table>

                      <!-- Glassmorphic CTA Button -->
                      <table width="100%" cellpadding="0" cellspacing="0" style="margin-bottom:32px;">
                        <tr>
                          <td>
                            <!-- Button container with glow -->
                            <div style="position:relative; display:inline-block; animation: buttonGlow 3s ease-in-out infinite;">
                              <a href="{{ .RedirectTo }}?token_hash={{ .TokenHash }}&type=recovery"
                                 data-cta="true"
                                 style="position:relative; display:inline-flex; align-items:center; gap:10px;
                                        padding:20px 44px;
                                        background: linear-gradient(135deg, rgba(90, 45, 184, 0.95) 0%, rgba(74, 29, 159, 0.95) 100%);
                                        backdrop-filter: blur(10px);
                                        -webkit-backdrop-filter: blur(10px);
                                        color:#ffffff;
                                        text-decoration:none;
                                        font-weight:700; font-size:16px;
                                        border-radius:16px;
                                        letter-spacing:0.5px;
                                        box-shadow: 0 8px 32px rgba(90, 45, 184, 0.35),
                                                    inset 0 1px 0 rgba(255, 255, 255, 0.2),
                                                    inset 0 -1px 0 rgba(0, 0, 0, 0.1);
                                        border:1px solid rgba(255, 255, 255, 0.18);
                                        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                                        overflow:hidden;">
                                
                                <!-- Shimmer effect overlay -->
                                <span style="position:absolute; top:0; left:-100%; width:100%; height:100%;
                                             background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
                                             animation: shimmer 3s infinite;"></span>
                                
                                <!-- Button text -->
                                <span style="position:relative; z-index:2;">Reset My Password</span>
                                
                                <!-- Arrow icon -->
                                <svg style="position:relative; z-index:2; transition: transform 0.3s ease;" 
                                     width="20" height="20" viewBox="0 0 20 20" fill="none">
                                  <path d="M4 10H16M16 10L11 5M16 10L11 15" 
                                        stroke="currentColor" stroke-width="2" 
                                        stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                              </a>
                              
                              <!-- Glowing ring effect -->
                              <div style="position:absolute; inset:-3px; background: linear-gradient(135deg, #5a2db8, #4a1d9f);
                                          border-radius:18px; opacity:0.4; filter:blur(8px); z-index:-1;
                                          animation: pulseRing 3s ease-in-out infinite;"></div>
                            </div>
                          </td>
                        </tr>
                      </table>

                      <!-- Alternative Link -->
                      <table width="100%" cellpadding="0" cellspacing="0" style="margin-bottom:28px;">
                        <tr>
                          <td style="font-size:13px; color:#888888; line-height:1.6;">
                            <strong style="color:#555555;">Having trouble with the button?</strong>
                            <br>
                            Copy and paste this link into your browser:
                            <br>
                            <a href="{{ .RedirectTo }}?token_hash={{ .TokenHash }}&type=recovery" 
                               style="color:#5a2db8; text-decoration:none; word-break:break-all; font-size:12px; margin-top:6px; display:inline-block;">
                              {{ .RedirectTo }}?token_hash={{ .TokenHash }}&type=recovery
                            </a>
                          </td>
                        </tr>
                      </table>

                      <!-- Security Notice -->
                      <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                          <td style="background-color:#fff5f5; border-left:4px solid #d63031;
                                     padding:20px 24px; border-radius:6px;">
                            <table width="100%" cellpadding="0" cellspacing="0">
                              <tr>
                                <td style="padding-bottom:8px;">
                                  <strong style="font-size:14px; color:#d63031;">
                                    <span style="margin-right:6px;">⚠️</span> Important Security Notice
                                  </strong>
                                </td>
                              </tr>
                              <tr>
                                <td style="font-size:13px; line-height:1.6; color:#555555;">
                                  If you didn't request a password reset, please ignore this email or 
                                  <a href="mailto:support@astarus.ai" style="color:#5a2db8; text-decoration:none; font-weight:600;">contact our support team</a> 
                                  immediately. Your password will remain unchanged.
                                </td>
                              </tr>
                            </table>
                          </td>
                        </tr>
                      </table>

                    </td>
                  </tr>

                  <!-- Footer Section -->
                  <tr>
                    <td style="padding:32px 48px; background-color:#f8f9fa; 
                               border-top:1px solid #e8e8e8; border-radius:0 0 12px 12px;">
                      <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                          <td style="padding-bottom:16px;">
                            <p style="margin:0; font-size:14px; color:#666666; line-height:1.6;">
                              Need help? Contact us at 
                              <a href="mailto:support@astarus.ai" style="color:#5a2db8; text-decoration:none; font-weight:600;">
                                support@astarus.ai
                              </a>
                            </p>
                          </td>
                        </tr>
                        <tr>
                          <td>
                            <p style="margin:0; font-size:12px; color:#999999;">
                              © 2026 Astaris AI · All rights reserved
                            </p>
                          </td>
                        </tr>
                      </table>
                    </td>
                  </tr>

                </table>

              </td>
            </tr>
          </table>

          <!-- Bottom Footer Links -->
          <table width="100%" cellpadding="0" cellspacing="0" style="margin-top:32px;">
            <tr>
              <td align="center" style="font-size:13px; color:#999999; line-height:1.6;">
                <a href="{{ .SiteURL }}" style="color:#5a2db8; text-decoration:none; margin:0 12px; font-weight:500;">Website</a>
                <span style="color:#cccccc;">·</span>
                <a href="{{ .SiteURL }}/privacy" style="color:#5a2db8; text-decoration:none; margin:0 12px; font-weight:500;">Privacy Policy</a>
                <span style="color:#cccccc;">·</span>
                <a href="{{ .SiteURL }}/terms" style="color:#5a2db8; text-decoration:none; margin:0 12px; font-weight:500;">Terms of Service</a>
              </td>
            </tr>
          </table>

        </td>
      </tr>
    </table>

    <!-- CSS Animations (optional; content stays visible even if stripped) -->
    <style>
      @keyframes fadeInDown {
        from {
          opacity: 0;
          transform: translateY(-20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes slideRight {
        from {
          transform: scaleX(0);
        }
        to {
          transform: scaleX(1);
        }
      }

      @keyframes expandWidth {
        from {
          transform: scaleX(0);
        }
        to {
          transform: scaleX(1);
        }
      }

      /* Creative Icon Animations */
      @keyframes floatUpDown {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-10px);
        }
      }

      @keyframes rotateKey {
        0%, 100% {
          transform: rotate(0deg);
        }
        25% {
          transform: rotate(-15deg);
        }
        50% {
          transform: rotate(15deg);
        }
        75% {
          transform: rotate(-10deg);
        }
      }

      @keyframes shieldPulse {
        0%, 100% {
          opacity: 0.3;
          transform: scale(1);
        }
        50% {
          opacity: 0.6;
          transform: scale(1.05);
        }
      }

      /* Security particle animations */
      @keyframes securityParticle1 {
        0% {
          opacity: 0;
          transform: translate(0, 0) scale(0);
        }
        25% {
          opacity: 1;
        }
        100% {
          opacity: 0;
          transform: translate(-25px, -35px) scale(1);
        }
      }

      @keyframes securityParticle2 {
        0% {
          opacity: 0;
          transform: translate(0, 0) scale(0);
        }
        35% {
          opacity: 1;
        }
        100% {
          opacity: 0;
          transform: translate(30px, -30px) scale(1);
        }
      }

      @keyframes securityParticle3 {
        0% {
          opacity: 0;
          transform: translate(0, 0) scale(0);
        }
        45% {
          opacity: 1;
        }
        100% {
          opacity: 0;
          transform: translate(-20px, 25px) scale(1);
        }
      }

      @keyframes securityParticle4 {
        0% {
          opacity: 0;
          transform: translate(0, 0) scale(0);
        }
        40% {
          opacity: 1;
        }
        100% {
          opacity: 0;
          transform: translate(25px, 30px) scale(1);
        }
      }

      /* Glassmorphic Button Animations */
      @keyframes shimmer {
        0% {
          left: -100%;
        }
        50%, 100% {
          left: 100%;
        }
      }

      @keyframes buttonGlow {
        0%, 100% {
          filter: brightness(1);
        }
        50% {
          filter: brightness(1.1);
        }
      }

      @keyframes pulseRing {
        0%, 100% {
          transform: scale(1);
          opacity: 0.4;
        }
        50% {
          transform: scale(1.05);
          opacity: 0.6;
        }
      }

      /* Button hover effect (optional) */
      a[data-cta="true"]:hover svg {
        transform: translateX(4px);
      }

      a[data-cta="true"]:active {
        transform: translateY(-1px) scale(0.98);
      }

      /* Responsive */
      @media only screen and (max-width: 600px) {
        img[width="220"] {
          width: 180px !important;
        }
        td[style*="padding:48px 48px 40px 48px"] {
          padding: 32px 24px 28px 24px !important;
        }
        td[style*="padding:32px 48px"] {
          padding: 24px !important;
        }
        h1 {
          font-size: 26px !important;
        }
        a[data-cta="true"] {
          padding: 18px 36px !important;
          font-size: 15px !important;
        }
      }
    </style>

  </body>
</html>
